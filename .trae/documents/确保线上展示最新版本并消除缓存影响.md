## 目标
- 确认并让 `jinmai-lab.tech` 展示最新代码版本。
- 通过一次“无缓存重建”部署消除 CDN/browser 缓存影响。
- 引入可见版本标识，方便以后快速判断线上是否最新。

## 当前配置概览
- `.vercelignore`：已不再忽略 `src/`，但忽略 `api/` 并保留 `!api/server.js`（允许一个后端入口）。
- `vercel.json`：
  - rewrites：`/api/(.*)` → `/api/$1`；`/(.*)` → `/static/$1`
  - headers：为首页 `/` 设置 `Cache-Control: no-cache`
- `package.json`：`pnpm build` 输出目录为 `dist/static`

## 执行计划
1. Vercel 控制台强制重建
   - 进入项目 → Deploys → 选择最近部署 → 点击 Redeploy
   - 选择 “Rebuild without cache”（不使用缓存）
2. 版本标识
   - 在前端加入版本信息（构建时间）：在页脚或设置页显示 `Build: YYYY-MM-DD HH:mm`。
   - 构建时通过环境变量注入时间，页面读取显示。
3. 缓存验证
   - 部署后访问 `https://jinmai-lab.tech/?v=<timestamp>` 强制绕过浏览器缓存
   - 检查响应头：首次应为 `X-Vercel-Cache: MISS`，随后为 `HIT`
4. 功能回归验证
   - 管理员登录自动跳转 `/admin`
   - 后台四个功能页（数据分析/战略采纳/用户管理/系统设置）正常渲染
5. 可选（后端策略）
   - 如无在 Vercel 运行后端的需求：移除 `!api/server.js`，完全静态部署，避免不必要的 serverless 函数上传
   - 如需要在 Vercel 运行后端：保留 `api/server.js`，确保无其它 `server.mjs/server.ts` 冲突文件

## 验证与交付
- 我将完成一次“无缓存重建”部署
- 为页面加入版本标识并展示
- 完成线上验证后反馈上线版本与验证结果