import{j as e,m as w,R as Xe,P as Ye,k as es,l as ze}from"./ui-vendor-MzHb7wIE.js";import{r as i,u as ss}from"./router-vendor-BxM3E2Au.js";import{u as me,t as m,A as as}from"./index-BK8JEn3N.js";import{c as K,a as ts,g as rs,k as is}from"./llm-IPTi-4PQ.js";import"./react-vendor-CWc6w16D.js";const ls=({isOpen:a,onClose:L})=>{const{isDark:n}=me(),[o,q]=i.useState([]),[F,g]=i.useState([]),[j,T]=i.useState(""),[S,$]=i.useState("editor"),[A,I]=i.useState(!0),[u,c]=i.useState("collaborators"),[h,l]=i.useState([]);i.useEffect(()=>{a&&(I(!0),setTimeout(()=>{q([{id:"1",username:"设计师小明",avatar:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=User%20avatar%20xiaoming&sign=cc76aace202a78fcb07391c53cf45642",role:"editor",isOnline:!0,cursorPosition:{x:150,y:200}},{id:"2",username:"创意总监小李",avatar:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=User%20avatar%20xiaoli&sign=0a161e92e8233ac1e907c1757a08b793",role:"editor",isOnline:!0,cursorPosition:{x:300,y:150}},{id:"3",username:"品牌经理老王",avatar:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=User%20avatar%20laowang&sign=ad224bf888bce01af0b2109dca2059e7",role:"viewer",isOnline:!1,lastActive:"10分钟前"}]),g([{id:"1",userId:"1",username:"设计师小明",action:"添加了传统纹样",timestamp:"1分钟前"},{id:"2",userId:"2",username:"创意总监小李",action:"调整了色彩方案",timestamp:"5分钟前"},{id:"3",userId:"1",username:"设计师小明",action:"保存了当前版本",timestamp:"10分钟前"}]),l([{id:"1",version:"v1.2",timestamp:"10分钟前",creator:"设计师小明",description:"添加了传统纹样"},{id:"2",version:"v1.1",timestamp:"30分钟前",creator:"创意总监小李",description:"调整了色彩方案"},{id:"3",version:"v1.0",timestamp:"1小时前",creator:"设计师小明",description:"初始版本"}]),I(!1)},800))},[a]);const Z=()=>{if(!j){m.error("请输入邮箱地址");return}m.success(`已邀请 ${j} 加入协作`),T(""),$("editor")},U=r=>{q(_=>_.filter(R=>R.id!==r)),m.success("已移除协作成员")},ee=(r,_)=>{q(R=>R.map(G=>G.id===r?{...G,role:_}:G)),m.success("已更新协作成员角色")};return a?e.jsxs(w.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{duration:.3},className:`fixed top-0 right-0 w-full max-w-md h-full ${n?"bg-gray-800":"bg-white"} shadow-2xl z-50 flex flex-col`,children:[e.jsxs("div",{className:`p-4 border-b ${n?"border-gray-700":"border-gray-200"} flex justify-between items-center`,children:[e.jsx("h3",{className:"text-lg font-bold",children:"协作创作"}),e.jsx("button",{onClick:L,className:`p-2 rounded-full ${n?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors`,"aria-label":"关闭",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("div",{className:`border-b ${n?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"flex",children:[{id:"collaborators",name:"协作者"},{id:"history",name:"操作历史"},{id:"versions",name:"版本管理"}].map(r=>e.jsx("button",{onClick:()=>c(r.id),className:`px-4 py-3 transition-colors font-medium text-sm ${u===r.id?"text-red-600 border-b-2 border-red-600":n?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"}`,children:r.name},r.id))})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u==="collaborators"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-base font-medium mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-users mr-2"}),"协作成员 (",o.length,")"]}),A?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(r=>e.jsxs("div",{className:"flex items-center p-3 rounded-xl bg-gray-100 dark:bg-gray-700 animate-pulse",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-1/3 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),e.jsx("div",{className:"h-3 w-1/4 bg-gray-300 dark:bg-gray-600 rounded"})]})]},r))}):e.jsx("div",{className:"space-y-3",children:o.map(r=>e.jsxs("div",{className:`p-3 rounded-xl ${n?"bg-gray-700":"bg-gray-50"} flex items-center`,children:[e.jsxs("div",{className:"relative mr-4",children:[e.jsx("img",{src:r.avatar,alt:r.username,className:"h-10 w-10 rounded-full"}),e.jsx("span",{className:`absolute bottom-0 right-0 h-3 w-3 rounded-full border-2 border-white ${r.isOnline?"bg-green-500":"bg-gray-400"}`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"font-medium",children:r.username}),e.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded-full ${r.role==="editor"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:r.role==="editor"?"编辑者":"查看者"})]}),e.jsx("p",{className:"text-xs opacity-70",children:r.isOnline?"在线":`最后在线：${r.lastActive}`})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:r.role,onChange:_=>ee(r.id,_.target.value),className:`text-xs p-1 rounded ${n?"bg-gray-600 border-gray-500":"bg-gray-200 border-gray-300"} border`,children:[e.jsx("option",{value:"editor",children:"编辑者"}),e.jsx("option",{value:"viewer",children:"查看者"})]}),e.jsx("button",{onClick:()=>U(r.id),className:`p-1.5 rounded ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} text-red-500 transition-colors`,"aria-label":"移除",children:e.jsx("i",{className:"fas fa-times"})})]})]},r.id))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-medium mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"邀请协作者"]}),e.jsx("div",{className:`p-4 rounded-xl ${n?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"邮箱地址"}),e.jsx("input",{type:"email",value:j,onChange:r=>T(r.target.value),placeholder:"输入协作者邮箱",className:`w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${n?"bg-gray-600 border-gray-500 text-white placeholder-gray-400 border":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 border"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"角色"}),e.jsxs("select",{value:S,onChange:r=>$(r.target.value),className:`w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${n?"bg-gray-600 border-gray-500 text-white border":"bg-white border-gray-300 text-gray-900 border"}`,children:[e.jsx("option",{value:"editor",children:"编辑者（可修改内容）"}),e.jsx("option",{value:"viewer",children:"查看者（仅可查看）"})]})]}),e.jsxs("button",{onClick:Z,className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx("i",{className:"fas fa-paper-plane mr-2"}),"发送邀请"]})]})})]})]}),u==="history"&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-medium mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-history mr-2"}),"操作历史"]}),A?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(r=>e.jsxs("div",{className:"flex items-center p-3 rounded-xl bg-gray-100 dark:bg-gray-700 animate-pulse",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-300 dark:bg-gray-600 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 w-1/2 bg-gray-300 dark:bg-gray-600 rounded mb-1"}),e.jsx("div",{className:"h-2 w-1/4 bg-gray-300 dark:bg-gray-600 rounded"})]})]},r))}):e.jsx("div",{className:"space-y-3",children:F.map(r=>e.jsxs("div",{className:`p-3 rounded-xl ${n?"bg-gray-700":"bg-gray-50"} flex items-center`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n?"bg-gray-600":"bg-gray-200"} mr-3`,children:e.jsx("i",{className:"fas fa-user text-sm"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:r.username}),e.jsx("span",{className:`ml-2 ${n?"text-gray-400":"text-gray-600"}`,children:r.action})]}),e.jsx("p",{className:"text-xs opacity-70",children:r.timestamp})]})]},r.id))})]}),u==="versions"&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-medium mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-code-branch mr-2"}),"版本管理"]}),A?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(r=>e.jsxs("div",{className:"p-3 rounded-xl bg-gray-100 dark:bg-gray-700 animate-pulse",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-4 w-1/4 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),e.jsx("div",{className:"h-4 w-1/4 bg-gray-300 dark:bg-gray-600 rounded mb-2"})]}),e.jsx("div",{className:"h-3 w-1/2 bg-gray-300 dark:bg-gray-600 rounded mb-3"}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"h-7 w-20 bg-gray-300 dark:bg-gray-600 rounded"})})]},r))}):e.jsx("div",{className:"space-y-3",children:h.map(r=>e.jsxs("div",{className:`p-3 rounded-xl ${n?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium",children:r.version}),e.jsx("span",{className:"text-xs opacity-70",children:r.timestamp})]}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center mr-2",children:e.jsx("i",{className:"fas fa-user text-xs"})}),e.jsx("span",{className:"text-sm",children:r.creator})]}),e.jsx("p",{className:"text-sm mb-3",children:r.description}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{className:`p-1.5 rounded text-sm ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,children:"查看差异"}),r.id!=="1"&&e.jsx("button",{className:"p-1.5 rounded text-sm bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:"恢复此版本"})]})]},r.id))})]})]}),e.jsx("div",{className:`p-4 border-t ${n?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:`flex-1 p-2 rounded-lg ${n?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors flex items-center justify-center`,children:[e.jsx("i",{className:"fas fa-link mr-2"}),e.jsx("span",{children:"复制分享链接"})]}),e.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-lg transition-colors flex items-center justify-center",children:e.jsx("i",{className:"fas fa-bell"})})]})})]}):null},ns=({workId:a,onClose:L})=>{const{isDark:n}=me(),[o,q]=i.useState(null),[F,g]=i.useState(!0),[j,T]=i.useState(!1),[S,$]=i.useState("overall");i.useEffect(()=>{g(!0),setTimeout(()=>{q({overallScore:85,culturalFit:{score:90,details:["成功融入了传统云纹元素","色彩搭配符合中国传统审美","纹样布局合理，保留了文化韵味"]},creativity:{score:82,details:["传统元素与现代设计结合有创新","构图新颖，视觉冲击力强","可以尝试更多元化的文化元素融合"]},aesthetics:{score:88,details:["整体视觉效果和谐统一","色彩层次分明，过渡自然","排版合理，重点突出"]},suggestions:["建议增加更多样化的传统纹样组合","可以考虑加入非物质文化遗产元素增强文化深度","尝试不同的色彩搭配方案，进一步突出国潮风格","增加互动性元素，提升用户参与感","考虑商业应用场景，优化设计细节"],commercialPotential:{score:85,analysis:["设计风格符合当前国潮趋势，具有较高商业价值","适合应用于文创产品、包装设计等领域","建议申请版权存证，保护原创权益","可考虑参与平台举办的商业化对接活动"]},similarWorks:[{id:1,thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Similar%20traditional%20Chinese%20design%20work%201&sign=0be95a761f4bd8e25cae9528abfdd52b",title:"国潮新风尚"},{id:2,thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Similar%20traditional%20Chinese%20design%20work%202&sign=602d99c262b01602d169b42c88c95dcc",title:"传统纹样创新"},{id:3,thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Similar%20traditional%20Chinese%20design%20work%203&sign=8e14dbb8211c99531cccb4429fa09e95",title:"东方美学重构"}]}),g(!1)},1500)},[a]);const A=()=>{m.success("已应用建议到当前创作")},I=()=>{m.success("已将商业化建议添加到您的创作任务列表")},u=c=>c>=90?{text:"优秀",color:"text-green-500"}:c>=80?{text:"良好",color:"text-blue-500"}:c>=70?{text:"中等",color:"text-yellow-500"}:c>=60?{text:"及格",color:"text-orange-500"}:{text:"需改进",color:"text-red-500"};return F?e.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center ${n?"bg-gray-900":"bg-gray-50"}`,children:e.jsx(w.div,{className:`p-8 rounded-2xl ${n?"bg-gray-800":"bg-white"} shadow-xl max-w-md w-full mx-4`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600 mb-4"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"AI智能点评中..."}),e.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"正在分析您的作品，请稍候..."})]})})}):o?e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:`fixed inset-0 z-50 flex items-center justify-center ${n?"bg-gray-900 bg-opacity-80":"bg-gray-50 bg-opacity-80"} backdrop-blur-sm`,children:e.jsxs(w.div,{className:`rounded-2xl ${n?"bg-gray-800":"bg-white"} shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto mx-4`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:`p-6 border-b ${n?"border-gray-700":"border-gray-200"} flex justify-between items-center`,children:[e.jsx("h3",{className:"text-xl font-bold",children:"AI智能点评"}),e.jsx("button",{onClick:L,className:`p-2 rounded-full ${n?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors`,"aria-label":"关闭",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("div",{className:`border-b ${n?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"flex",children:[{id:"overall",name:"总体评分"},{id:"detail",name:"详细点评"},{id:"commercial",name:"商业化建议"}].map(c=>e.jsx("button",{onClick:()=>$(c.id),className:`px-6 py-3 transition-colors font-medium text-sm ${S===c.id?"text-red-600 border-b-2 border-red-600":n?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"}`,children:c.name},c.id))})}),e.jsxs("div",{className:"p-6",children:[S==="overall"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center mb-8",children:[e.jsx("div",{className:"flex-shrink-0 mb-6 md:mb-0 md:mr-8",children:e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsx(Xe,{width:"100%",height:"100%",children:e.jsx(Ye,{children:e.jsxs(es,{data:[{value:o.overallScore},{value:100-o.overallScore}],cx:"50%",cy:"50%",innerRadius:30,outerRadius:50,startAngle:90,endAngle:-270,paddingAngle:0,dataKey:"value",children:[e.jsx(ze,{fill:"#ef4444"}),e.jsx(ze,{fill:n?"#374151":"#e5e7eb"})]})})}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[e.jsx("span",{className:"text-3xl font-bold",children:o.overallScore}),e.jsx("span",{className:"text-sm opacity-70",children:"总分"})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{title:"文化契合度",score:o.culturalFit.score,color:"text-green-500"},{title:"创意性",score:o.creativity.score,color:"text-blue-500"},{title:"美学表现",score:o.aesthetics.score,color:"text-purple-500"}].map((c,h)=>{const l=u(c.score);return e.jsxs("div",{className:`p-4 rounded-xl ${n?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-sm mb-1",children:c.title}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold mr-2",children:c.score}),e.jsx("span",{className:`text-sm ${l.color}`,children:l.text})]})]},h)})})})]}),e.jsxs("div",{className:`p-5 rounded-xl ${n?"bg-gray-700":"bg-gray-50"} mb-8`,children:[e.jsx("h4",{className:"font-medium mb-3",children:"作品亮点"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-star text-yellow-500 mt-1 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"文化元素融入自然，展现了深厚的文化底蕴"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-star text-yellow-500 mt-1 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"设计风格现代与传统完美结合，符合当下国潮趋势"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-star text-yellow-500 mt-1 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"视觉层次分明，色彩搭配和谐统一"})]})]})]}),o.similarWorks&&o.similarWorks.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-4",children:"推荐参考作品"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.similarWorks.map(c=>e.jsxs(w.div,{className:`${n?"bg-gray-700":"bg-gray-50"} rounded-xl overflow-hidden shadow-sm transition-all hover:shadow-md`,whileHover:{y:-5},children:[e.jsx("img",{src:c.thumbnail,alt:c.title,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"p-3",children:e.jsx("p",{className:"text-sm font-medium text-center",children:c.title})})]},c.id))})]})]}),S==="detail"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-5 rounded-xl ${n?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h5",{className:"font-medium",children:"文化契合度"}),e.jsx("div",{className:`text-sm ${u(o.culturalFit.score).color}`,children:u(o.culturalFit.score).text})]}),e.jsx("ul",{className:"space-y-2",children:o.culturalFit.details.map((c,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:c})]},h))})]}),e.jsxs("div",{className:`p-5 rounded-xl ${n?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h5",{className:"font-medium",children:"创意性"}),e.jsx("div",{className:`text-sm ${u(o.creativity.score).color}`,children:u(o.creativity.score).text})]}),e.jsx("ul",{className:"space-y-2",children:o.creativity.details.map((c,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:c})]},h))})]}),e.jsxs("div",{className:`p-5 rounded-xl ${n?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h5",{className:"font-medium",children:"美学表现"}),e.jsx("div",{className:`text-sm ${u(o.aesthetics.score).color}`,children:u(o.aesthetics.score).text})]}),e.jsx("ul",{className:"space-y-2",children:o.aesthetics.details.map((c,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:c})]},h))})]}),e.jsxs("div",{className:`p-5 rounded-xl ${n?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("h5",{className:"font-medium mb-3",children:"改进建议"}),e.jsx("ul",{className:"space-y-3",children:(j?o.suggestions:o.suggestions.slice(0,2)).map((c,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-lightbulb text-yellow-500 mt-1 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm",children:c}),e.jsx("button",{onClick:()=>A(),className:"ml-2 text-xs text-red-600 hover:text-red-700",children:"应用此建议"})]})]},h))}),o.suggestions.length>2&&e.jsxs("button",{onClick:()=>T(!j),className:"mt-3 text-sm text-red-600 hover:text-red-700 flex items-center",children:[j?"收起":"查看更多建议",e.jsx("i",{className:`fas fa-chevron-${j?"up":"down"} ml-1`})]})]})]}),S==="commercial"&&o.commercialPotential&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mr-4",children:e.jsx("i",{className:"fas fa-chart-line text-2xl"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold mb-1",children:"商业化潜力评估"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl font-bold mr-2",children:o.commercialPotential.score}),e.jsx("span",{className:`${u(o.commercialPotential.score).color} text-sm`,children:u(o.commercialPotential.score).text})]})]})]}),e.jsxs("div",{className:`p-5 rounded-xl ${n?"bg-gray-700":"bg-gray-50"} mb-6`,children:[e.jsx("h5",{className:"font-medium mb-3",children:"商业化分析"}),e.jsx("ul",{className:"space-y-2",children:o.commercialPotential.analysis.map((c,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-bullseye text-blue-500 mt-1 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:c})]},h))})]}),e.jsxs("div",{className:`p-5 rounded-xl ${n?"bg-gray-700":"bg-gray-50"} mb-6`,children:[e.jsx("h5",{className:"font-medium mb-3",children:"推荐商业化路径"}),e.jsx("div",{className:"space-y-3",children:[{title:"文创产品开发",icon:"gift",description:"适合开发成各类文创周边产品"},{title:"品牌包装设计",icon:"box",description:"可应用于老字号品牌包装升级"},{title:"数字藏品",icon:"gem",description:"具有转化为数字藏品的潜力"}].map((c,h)=>e.jsxs("div",{className:"flex items-start p-3 rounded-lg bg-white bg-opacity-10",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("i",{className:`fas fa-${c.icon}`})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium",children:c.title}),e.jsx("p",{className:"text-xs opacity-80",children:c.description})]})]},h))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"font-medium mb-3",children:"相关活动推荐"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{title:"老字号品牌创新大赛",deadline:"2025-12-31",reward:"最高奖金¥50,000",image:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Design%20competition%20poster%20traditional%20Chinese%20elements&sign=d88a4b2e0df676de09e2ee97c051351e"},{title:"国潮文创设计营",deadline:"2025-11-30",reward:"专业导师指导+展示机会",image:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Cultural%20creative%20design%20workshop&sign=41a2bed0750ee869179a670a88992813"}].map((c,h)=>e.jsx("div",{className:`rounded-lg overflow-hidden ${n?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("img",{src:c.image,alt:c.title,className:"w-24 h-24 object-cover"}),e.jsxs("div",{className:"p-3 flex-1",children:[e.jsx("h6",{className:"font-medium mb-1",children:c.title}),e.jsxs("div",{className:"text-xs opacity-80 mb-1",children:["截止日期：",c.deadline]}),e.jsx("div",{className:"text-xs font-medium text-red-600",children:c.reward})]})]})},h))})]})]})]}),e.jsxs("div",{className:`p-6 border-t ${n?"border-gray-700":"border-gray-200"} flex justify-end space-x-3`,children:[S==="commercial"&&o.commercialPotential&&e.jsx("button",{onClick:I,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:"采纳商业化建议"}),S==="detail"&&e.jsx("button",{className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors",children:"应用所有建议"}),e.jsx("button",{onClick:L,className:`px-4 py-2 rounded-lg ${n?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors`,children:"关闭"})]})]})}):null};var cs={};const Pe=[{id:1,thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=AI%20generated%20traditional%20Chinese%20design%201&sign=5d295efa4c1b91d0ed9d0424e1d5a77f",score:85},{id:2,thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=AI%20generated%20traditional%20Chinese%20design%202&sign=971b08d52c4e72712a03066cb833a33d",score:78},{id:3,thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=AI%20generated%20traditional%20Chinese%20design%203&sign=ac4d5111d8ff13d9443570e326e981d5",score:92},{id:4,thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=AI%20generated%20traditional%20Chinese%20design%204&sign=bc148392ff4140acadf0a83f843900a5",score:75}],os=[{id:1,name:"云纹",thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Traditional%20Chinese%20cloud%20pattern&sign=d755e544fc16eb71959c8595392c8203",description:"象征吉祥如意，常用于传统服饰和建筑"},{id:2,name:"龙纹",thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Traditional%20Chinese%20dragon%20pattern&sign=5cd3b5dd36b10020c3b16e78e34d1401",description:"象征权力与尊贵，中国传统文化的重要象征"},{id:3,name:"凤纹",thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Traditional%20Chinese%20phoenix%20pattern&sign=5a5227b9ca3462f9a6968460dffb3b51",description:"象征美好与幸福，常与龙纹配合使用"},{id:4,name:"回纹",thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Traditional%20Chinese%20key%20pattern&sign=5de7bed9a5dc7ada21b39308a389568b",description:"寓意吉祥绵延，是传统装饰中常见的纹样"},{id:5,name:"花卉纹",thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Traditional%20Chinese%20flower%20pattern&sign=2a4d62b26c213096a7c02cf6e06ddede",description:"象征自然与生机，常见牡丹、莲花等纹样"},{id:6,name:"几何纹",thumbnail:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Traditional%20Chinese%20geometric%20pattern&sign=edbb0ecd67ed828e84a49f142567163a",description:"简洁明快，富有节奏感和韵律感"}];function us(){var Se,_e;const{isDark:a}=me(),{isAuthenticated:L,user:n}=i.useContext(as),o=ss(),[q,F]=i.useState("sketch"),[g,j]=i.useState(""),[T,S]=i.useState(Pe),[$,A]=i.useState(null),[I,u]=i.useState(!1),[c,h]=i.useState(!1),[l,Z]=i.useState("kimi"),[U,ee]=i.useState(!1),[r,_]=i.useState(""),[R,G]=i.useState(""),[M,se]=i.useState("txt2img"),[ae,xe]=i.useState(""),[te,Te]=i.useState(!1),[B,V]=i.useState([{role:"system",content:"你是提示词采集助手，通过多轮问答澄清目标、风格、受众、文化元素、色彩与尺寸等，问题要简洁具体。用户每次回答后继续追问未明确的点。"}]),[re,z]=i.useState(""),[ge,he]=i.useState(!1),[ie,Ae]=i.useState("guided"),[le,Oe]=i.useState("电商海报"),[ne,ce]=i.useState(0),[pe,ue]=i.useState([]),[Le,be]=i.useState(!1),[d,qe]=i.useState(""),[k,Re]=i.useState("电商竖版"),[H,Me]=i.useState("1080x1920"),[D,fe]=i.useState(""),[Q,De]=i.useState(!0),[W,Ge]=i.useState(!0),[J,Be]=i.useState(!0),[X,Fe]=i.useState(!0),b={泥人张:{voice:"非遗彩塑、人物传神、戏曲民俗、手作温度、京味津韵",styleTags:["非遗彩塑","手作刀痕","文博展陈","暖调灯光"],paletteTags:["胭脂红","黛青","象牙白","点金"],cultureTags:["戏曲脸谱","胡同巷景","作坊案台"],samplePrompts:["非遗彩塑肖像，泥人张风格，戏曲人物神态生动，手作质感，红黑金点缀，暖光","市井童趣泥塑小景，老天津胡同与摊位，温润泥感，莫兰迪低饱和","非遗主题展KV，泥塑与现代几何拼贴，中英标题，文博感"],forbiddenPoints:["不得丑化或戏谑非遗形象","不得误用宗教/戏曲符号","不得低俗网红化","不得虚假联名"],platformSafeZones:{电商竖版:"顶部80px与底部120px避免重要信息，主体居中",电商横版:"左右各120px裁切安全，文案中上部",小红书:"顶部昵称区100px与底部互动区160px避让",抖音封面:"右侧操作区120px与底部200px避让，主体偏左",B站封面:"左下角180x180避让，标题位于中上1/3",淘宝主图:"四边60px安全区，主体占比≥70%",包装正面:"四边出血3mm，Logo与卖点居中",LOGO:"四周安全边距x单位"}},杨柳青年画:{voice:"吉祥民俗、年味喜庆、木刻套印、寓意象征",styleTags:["套色版画","题签留白","传统纹样","吉祥象征"],paletteTags:["中国红","石青","石绿","赭黄","黑"],cultureTags:["门神","娃娃年画","“福”字"],samplePrompts:["杨柳青年画门神，套色版画肌理，红黑金强对比，福瑞主题，春节KV","现代构成×年画拼贴，几何留白+书法题签，潮流国风","亲子文创包装，年画娃娃主视觉，温暖米白纸感"],forbiddenPoints:["不得恶搞门神形象","不得滥用吉祥符号","不得错误配色与肌理缺失","不得误导地域来源"],platformSafeZones:{电商竖版:"顶部80px与底部120px避免重要信息，主体居中",电商横版:"左右各120px裁切安全，文案中上部",小红书:"顶部昵称区100px与底部互动区160px避让",抖音封面:"右侧操作区120px与底部200px避让，主体偏左",B站封面:"左下角180x180避让，标题位于中上1/3",淘宝主图:"四边60px安全区，主体占比≥70%",包装正面:"四边出血3mm，Logo与卖点居中",LOGO:"四周安全边距x单位"}},狗不理包子:{voice:"匠心面点、鲜香多汁、城市名片、烟火日常",styleTags:["蒸汽氛围","褶皱光影","极简摄影"],paletteTags:["红金","米白","木色"],cultureTags:["蒸笼竹屉","老字号印章"],samplePrompts:["蒸汽弥漫的鲜肉包特写，褶皱光影，红金品牌章，城市名片","家庭团圆餐桌，竹屉蒸笼，软焦暖光，生活方式大片","航站楼灯箱KV，极简白底+包子特写，红金品牌角标"],forbiddenPoints:["不得虚假健康功效宣称","不得不当卫生画面","不得抄袭他牌形象","不得误导产地"],platformSafeZones:{电商竖版:"顶部80px与底部120px避免重要信息，主体居中",电商横版:"左右各120px裁切安全，文案中上部",小红书:"顶部昵称区100px与底部互动区160px避让",抖音封面:"右侧操作区120px与底部200px避让，主体偏左",B站封面:"左下角180x180避让，标题位于中上1/3",淘宝主图:"四边60px安全区，主体占比≥70%",包装正面:"四边出血3mm，Logo与卖点居中",LOGO:"四周安全边距x单位"}},桂发祥麻花:{voice:"层层酥脆、什锦夹馅、节庆馈赠、街巷记忆",styleTags:["扭绞纹理","礼盒结构","复古年味"],paletteTags:["喜庆红","暖黄","金"],cultureTags:["十八街元素","街牌符号"],samplePrompts:["麻花质感微距，芝麻与酥层清晰，红金礼盒，年礼主题","城市礼物KV，十八街路牌拼贴，现代无衬线中英组合","复古年画风格×麻花构图，暖黄底色，手绘插画"],forbiddenPoints:["不得虚假营养宣称","不得误用“十八街”标识","不得夸张金属感误导","不得低俗表达"],platformSafeZones:{电商竖版:"顶部80px与底部120px避免重要信息，主体居中",电商横版:"左右各120px裁切安全，文案中上部",小红书:"顶部昵称区100px与底部互动区160px避让",抖音封面:"右侧操作区120px与底部200px避让，主体偏左",B站封面:"左下角180x180避让，标题位于中上1/3",淘宝主图:"四边60px安全区，主体占比≥70%",包装正面:"四边出血3mm，Logo与卖点居中",LOGO:"四周安全边距x单位"}},耳朵眼炸糕:{voice:"金黄外酥、内馅软糯、庙会市井、步步高寓意",styleTags:["油泡高光","断面拉丝","档口烟火"],paletteTags:["金黄","焦糖褐","暖白","墨绿"],cultureTags:["胡同路牌","庙会气氛"],samplePrompts:["炸糕断面特写，金黄油亮，胡同路牌元素，市井烟火","庙会主题海报，大字号“步步高”，复古招贴风","外卖装视觉，极简白底+金黄食物主视觉，清洁感"],forbiddenPoints:["不得医疗保健暗示","不得过度油脂夸张","不得低俗化市井形象","不得误导原料"],platformSafeZones:{电商竖版:"顶部80px与底部120px避免重要信息，主体居中",电商横版:"左右各120px裁切安全，文案中上部",小红书:"顶部昵称区100px与底部互动区160px避让",抖音封面:"右侧操作区120px与底部200px避让，主体偏左",B站封面:"左下角180x180避让，标题位于中上1/3",淘宝主图:"四边60px安全区，主体占比≥70%",包装正面:"四边出血3mm，Logo与卖点居中",LOGO:"四周安全边距x单位"}},果仁张:{voice:"焦香坚果、真材实料、老少皆宜、伴手礼",styleTags:["铜锅炒制","坚果散落","票号纹理"],paletteTags:["焦糖褐","坚果米色","墨绿","铜金"],cultureTags:["老票据","市井小店"],samplePrompts:["果仁糖近景，碎裂动态，铜版复古插画，礼盒陈列","老票据纹理底图+坚果散落，怀旧文案题签","亲子零食KV，健康轻负担调性，明快光线"],forbiddenPoints:["不得虚假原料来源","不得抄袭票据纹理版权","不得夸大健康益处","不得误导产地"],platformSafeZones:{电商竖版:"顶部80px与底部120px避免重要信息，主体居中",电商横版:"左右各120px裁切安全，文案中上部",小红书:"顶部昵称区100px与底部互动区160px避让",抖音封面:"右侧操作区120px与底部200px避让，主体偏左",B站封面:"左下角180x180避让，标题位于中上1/3",淘宝主图:"四边60px安全区，主体占比≥70%",包装正面:"四边出血3mm，Logo与卖点居中",LOGO:"四周安全边距x单位"}},盛锡福:{voice:"匠心制帽、绅士格调、经典款式、国潮改良",styleTags:["呢料纹理","缝线细节","礼帽徽章"],paletteTags:["墨黑","藏青","驼","金属扣件色"],cultureTags:["帽模台","复古陈列"],samplePrompts:["经典礼帽静物，呢料质感微距，墨黑驼配色，金徽章","国潮街拍，帽饰搭配，城市夜景霓虹，复古现代混搭","礼盒开箱KV，磁吸结构+烫金标，简洁高端"],forbiddenPoints:["不得伪装奢侈联名","不得抄袭徽章/标识","不得误导材质与工艺","不得低俗噱头"],platformSafeZones:{电商竖版:"顶部80px与底部120px避免重要信息，主体居中",电商横版:"左右各120px裁切安全，文案中上部",小红书:"顶部昵称区100px与底部互动区160px避让",抖音封面:"右侧操作区120px与底部200px避让，主体偏左",B站封面:"左下角180x180避让，标题位于中上1/3",淘宝主图:"四边60px安全区，主体占比≥70%",包装正面:"四边出血3mm，Logo与卖点居中",LOGO:"四周安全边距x单位"}},老美华:{voice:"舒适国货、手工针脚、文艺日常、非遗织造",styleTags:["布纹织理","刺绣花纹","手工针脚"],paletteTags:["靛蓝","米白","墨黑","朱砂红"],cultureTags:["竹编衬底","宣纸肌理"],samplePrompts:["传统布鞋与刺绣花纹，手工针脚可见，清新自然布景","国风穿搭海报，留白+品牌章，文艺质朴","老字号×高校IP联名概念图，校园元素融合"],forbiddenPoints:["不得抄袭刺绣图案","不得误导手工工艺","不得虚假舒适性宣称","不得低俗国风化"],platformSafeZones:{电商竖版:"顶部80px与底部120px避免重要信息，主体居中",电商横版:"左右各120px裁切安全，文案中上部",小红书:"顶部昵称区100px与底部互动区160px避让",抖音封面:"右侧操作区120px与底部200px避让，主体偏左",B站封面:"左下角180x180避让，标题位于中上1/3",淘宝主图:"四边60px安全区，主体占比≥70%",包装正面:"四边出血3mm，Logo与卖点居中",LOGO:"四周安全边距x单位"}},正兴德茶庄:{voice:"老茶铺风骨、清幽雅致、礼赠社交、讲究水火",styleTags:["紫砂壶","盖碗茶席","书法题签"],paletteTags:["墨绿","砂金","宣纸白","棕"],cultureTags:["篆刻章","宣纸肌理"],samplePrompts:["茶席静物，紫砂壶与盖碗蒸腾，墨绿砂金，书法题签","商务礼茶包装，抽屉盒+烫金篆章，礼序感","茶会KV，国风留白构图，行书标题，沉静气质"],forbiddenPoints:["不得虚假年份与产地","不得保健功效宣称","不得误导水温与冲泡方式","不得伪造大师款"],platformSafeZones:{电商竖版:"顶部80px与底部120px避免重要信息，主体居中",电商横版:"左右各120px裁切安全，文案中上部",小红书:"顶部昵称区100px与底部互动区160px避让",抖音封面:"右侧操作区120px与底部200px避让，主体偏左",B站封面:"左下角180x180避让，标题位于中上1/3",淘宝主图:"四边60px安全区，主体占比≥70%",包装正面:"四边出血3mm，Logo与卖点居中",LOGO:"四周安全边距x单位"}}},Ze={deepseek:"deepseek-chat",doubao:"093d64b7-5bcb-4f65-aab1-6782e71fd804",kimi:"moonshot-v1-32k",jimeng:"jimeng-pro-4.0",kling:"kling-image-1.0",zhipu:"glm-4-flash",gemini:"gemini-1.5-pro"};i.useEffect(()=>{_(Ze[l])},[l]);const[N,Y]=i.useState(1),[Ee,Ke]=i.useState(!0),[ye,je]=i.useState(!1),[Ue,ve]=i.useState(!1),[Ne,Ve]=i.useState(!0),[f,E]=i.useState(null);i.useEffect(()=>{!L||!n?o("/login"):setTimeout(()=>{Ke(!1)},800)},[L,n,o]),i.useEffect(()=>{const s=setTimeout(()=>{g.trim()&&(localStorage.setItem("create_draft_prompt",g),localStorage.setItem("create_draft_provider",l),localStorage.setItem("create_draft_customModel",r))},2e3);return()=>clearTimeout(s)},[g,l,r]),i.useEffect(()=>{const s=localStorage.getItem("create_draft_prompt"),t=localStorage.getItem("create_draft_provider"),v=localStorage.getItem("create_draft_customModel");s&&!g&&j(s),t&&!l&&Z(t),v&&!r&&_(v)},[]);const we=async()=>{if(!g.trim()){m.error("请输入创作提示词");return}try{u(!0);const s=l==="kling"?"zhipu":l,t=r.trim()||(s==="doubao"?"doubao-1.5-pro-32k-250115":s==="kimi"?"moonshot-v1-32k":s==="jimeng"?"jimeng-pro-4.0":s==="zhipu"?"glm-4-flash":s==="gemini"?"gemini-1.5-pro":"deepseek-chat"),v=await K({provider:s,model:t,messages:[{role:"system",content:`请严格遵循：平台=${k}，尺寸=${H}；${Q?"需附合规意识":""}${W?"；不得医疗/功效性暗示":""}${J?"；不得未经授权的IP/商标元素":""}${X?"；不得不当使用国旗国徽等":""}${D?"；禁止元素："+D:""}${d?"；品牌禁用："+(b[d].forbiddenPoints||[]).join("、"):""}${d?"；品牌语气："+b[d].voice:""}${d&&b[d].platformSafeZones[k]?"；平台安全区："+b[d].platformSafeZones[k]:""}`},{role:"system",content:"你是资深视觉设计师，请基于提示词生成3个不同风格的创意方案，简短描述每个方案的主题与风格关键词，用中文分行返回。"},{role:"user",content:g}]}),O=String(v||"").split(/\n|；|;|\r/).filter(y=>y.trim()).slice(0,3),Ie=R.split(/\n|,|\s+/).map(y=>y.trim()).filter(y=>y).map(y=>{const x=y.match(/^(https?:\/\/\S+?)(?:@([0-9]*\.?[0-9]+))?$/);if(!x)return null;const p=x[1],C=x[2]?parseFloat(x[2]):void 0;return C!==void 0?{url:p,weight:C}:{url:p}}).filter(Boolean);let P=O.map((y,x)=>({id:x+1,thumbnail:"",score:80+Math.floor(Math.random()*15)}));if(l==="jimeng"&&M==="compose"&&Ie.length>0){const y=await Promise.all(O.map(x=>ts({provider:"jimeng",prompt:x,images:Ie,model:"jimeng-4.0",width:1024,height:1024,negative_prompt:ae.trim()})));P=P.map((x,p)=>{var C;return{...x,thumbnail:((C=y[p])==null?void 0:C[0])||`https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=${encodeURIComponent(O[p]||`AI design ${p+1}`)}&sign=5d295efa4c1b91d0ed9d0424e1d5a77f`}})}else if(l==="jimeng"&&M==="txt2img"){const y=await Promise.all(O.map(x=>rs({provider:"jimeng",prompt:x,model:"jimeng-4.0",width:1024,height:1024})));P=P.map((x,p)=>{var C;return{...x,thumbnail:((C=y[p])==null?void 0:C[0])||`https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=${encodeURIComponent(O[p]||`AI design ${p+1}`)}&sign=5d295efa4c1b91d0ed9d0424e1d5a77f`}})}else if(l==="kling"&&M==="txt2img"){const y=await Promise.all(O.map(x=>is({model:"kling-image-1.0",prompt:x,width:1024,height:1024})));P=P.map((x,p)=>{var C;return{...x,thumbnail:((C=y[p])==null?void 0:C[0])||`https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=${encodeURIComponent(O[p]||`AI design ${p+1}`)}&sign=5d295efa4c1b91d0ed9d0424e1d5a77f`}})}else{const y=(x,p)=>`https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=${encodeURIComponent(x||`AI design ${p+1}`)}&sign=5d295efa4c1b91d0ed9d0424e1d5a77f`;P=O.map((x,p)=>({id:p+1,thumbnail:y(x,p),score:80+Math.floor(Math.random()*15)}))}S(P.length?P:Pe),Y(2),m.success("AI创作完成！请选择一个方案进行编辑")}catch{m.error("调用大模型失败，请配置密钥")}finally{u(!1)}},He=async()=>{if(!g.trim()){m.error("请输入创作提示词");return}try{h(!0);const s=await K({provider:l,model:r.trim()||(l==="doubao"?"doubao-1.5-pro-32k-250115":l==="kimi"?"moonshot-v1-32k":l==="gemini"?"gemini-1.5-pro":"deepseek-chat"),messages:[{role:"system",content:"你是中文提示词优化助手，输出更清晰、具体的提示词"},{role:"user",content:g}]});j(s||g),m.success("已优化提示词")}catch{m.error("调用大模型失败，请配置密钥")}finally{h(!1)}},Qe=s=>{A(s),Y(3)},$e=()=>{const s={prompt:g,provider:l,customModel:r,refImagesInput:R,negativePromptInput:ae,imageMode:M,selectedResult:$,currentStep:N,timestamp:new Date().toISOString()},t=JSON.parse(localStorage.getItem("drafts")||"[]");t.unshift(s),t.length>10&&t.splice(10),localStorage.setItem("drafts",JSON.stringify(t)),localStorage.removeItem("create_draft_prompt"),localStorage.removeItem("create_draft_provider"),localStorage.removeItem("create_draft_customModel"),m.success("草稿已保存到草稿箱")},ke=()=>{Ne?We():oe()},We=()=>{E({status:"pending",issues:[]}),setTimeout(()=>{E({status:"warning",issues:[{type:"content",severity:"warning",message:"检测到部分文化元素使用可能存在歧义，建议进行调整"},{type:"copyright",severity:"warning",message:"建议添加版权存证，保护您的原创权益"}]})},1500)},oe=()=>{m.success("作品发布成功！正在进行版权存证..."),setTimeout(()=>{m.success("版权存证完成！"),setTimeout(()=>{o("/dashboard")},1e3)},1500)},Ce=()=>{N>1?Y(N-1):o("/dashboard")},Je=()=>{(f==null?void 0:f.status)==="warning"&&oe()},de=()=>{ee(!U)};return Ee?e.jsxs("div",{className:`min-h-screen ${a?"bg-gray-900":"bg-gray-50"} text-white`,children:[e.jsx("nav",{className:`sticky top-0 z-50 ${a?"bg-gray-800":"bg-white"} border-b ${a?"border-gray-700":"border-gray-200"} px-4 py-3`,children:e.jsx("div",{className:"container mx-auto flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:"AI"}),e.jsx("span",{className:"text-xl font-bold",children:"共创"})]})})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:`h-8 w-1/3 rounded ${a?"bg-gray-800":"bg-white"} animate-pulse`}),e.jsx("div",{className:`h-10 rounded ${a?"bg-gray-800":"bg-white"} animate-pulse`}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:`col-span-1 ${a?"bg-gray-800":"bg-white"} rounded-2xl p-6 animate-pulse`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`h-12 rounded ${a?"bg-gray-700":"bg-gray-100"} animate-pulse`}),e.jsx("div",{className:`h-32 rounded ${a?"bg-gray-700":"bg-gray-100"} animate-pulse`}),e.jsx("div",{className:`h-12 rounded ${a?"bg-gray-700":"bg-gray-100"} animate-pulse`})]})}),e.jsx("div",{className:`col-span-2 ${a?"bg-gray-800":"bg-white"} rounded-2xl p-6 animate-pulse`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`h-6 rounded ${a?"bg-gray-700":"bg-gray-100"} animate-pulse w-1/4`}),e.jsx("div",{className:`h-40 rounded ${a?"bg-gray-700":"bg-gray-100"} animate-pulse`}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2].map(s=>e.jsx("div",{className:`h-12 rounded ${a?"bg-gray-700":"bg-gray-100"} animate-pulse`},s))}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>Te(!te),className:`${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200"} px-3 py-2 rounded-lg text-sm`,children:te?"收起交互问答":"开启交互问答"})}),te&&e.jsxs("div",{className:`${a?"bg-gray-700":"bg-gray-50"} rounded-xl p-3 mt-3 space-y-3`,children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:ie,onChange:s=>{Ae(s.target.value),ce(0)},className:`${a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-2 py-1 text-xs`,children:[e.jsx("option",{value:"guided",children:"引导模式"}),e.jsx("option",{value:"expert",children:"专家模式"}),e.jsx("option",{value:"minimal",children:"极简模式"})]}),e.jsxs("select",{value:le,onChange:s=>{Oe(s.target.value),ce(0)},className:`${a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-2 py-1 text-xs`,children:[e.jsx("option",{children:"电商海报"}),e.jsx("option",{children:"LOGO"}),e.jsx("option",{children:"包装"}),e.jsx("option",{children:"插画"}),e.jsx("option",{children:"App Banner"}),e.jsx("option",{children:"海报/KV"}),e.jsx("option",{children:"短视频封面"})]}),e.jsxs("select",{value:d,onChange:s=>{qe(s.target.value)},className:`${a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-2 py-1 text-xs`,children:[e.jsx("option",{value:"",children:"未选择品牌"}),e.jsx("option",{children:"泥人张"}),e.jsx("option",{children:"杨柳青年画"}),e.jsx("option",{children:"狗不理包子"}),e.jsx("option",{children:"桂发祥麻花"}),e.jsx("option",{children:"耳朵眼炸糕"}),e.jsx("option",{children:"果仁张"}),e.jsx("option",{children:"盛锡福"}),e.jsx("option",{children:"老美华"}),e.jsx("option",{children:"正兴德茶庄"})]}),(()=>{const s=`${ie}_${["电商海报","LOGO","包装","插画","App Banner","海报/KV","短视频封面"].includes(le)?le:"default"}`,t={guided_电商海报:["商品或主题是什么","目标人群与场景是什么","想要的气质与风格关键词","主要视觉元素与文化元素","画面构图比例与尺寸","色彩倾向与品牌色","文案口号与语气","输出格式与分辨率"],guided_LOGO:["品牌名称和寓意","行业与受众","希望传达的性格","偏好的形态与元素","中式文化是否要体现","颜色与单双色适配","应用场景","交付格式"],guided_包装:["产品品类与规格","材质与工艺","风格与文化元素","正面主视觉要点","配色与限制","文案与合规","展开尺寸与刀模"],guided_插画:["主题与情绪","时代与文化氛围","角色/场景要素","视角构图与比例","笔触质感与风格流派","颜色氛围","输出尺寸与用途"],expert_default:["有哪些不可出现的元素","必须包含的文化符号","品牌风格指南的关键点","使用的具体色值","目标平台的尺寸与安全区","竞品差异化点"],minimal_default:["一句话描述目标","三个风格词","两个文化元素","一个主色与一个辅色","比例与尺寸"]},v=t[s]||t[`${ie}_default`]||[];return v.length?e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:a?"text-gray-300":"text-gray-600",children:"推荐问题："}),e.jsx("button",{onClick:()=>{z(v[ne%v.length])},className:"px-2 py-1 rounded bg-red-600 text-white",children:v[ne%v.length]}),e.jsx("button",{onClick:()=>ce((ne+1)%(v.length||1)),className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded`,children:"换一换"})]}):null})()]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["中式新潮","极简留白","赛博东方","复古做旧","手绘插画","拟物质感","霓虹夜色"].map(s=>e.jsx("button",{onClick:()=>z(t=>t?t+"；风格："+s:"风格："+s),className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded text-xs`,children:s},s))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["中国红/金","水墨青/灰","高级黑/银","莫兰迪","暖阳橙","薄荷绿"].map(s=>e.jsx("button",{onClick:()=>z(t=>t?t+"；配色："+s:"配色："+s),className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded text-xs`,children:s},s))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["云纹","回纹","龙纹","凤纹","青花瓷","剪纸","篆刻"].map(s=>e.jsx("button",{onClick:()=>z(t=>t?t+"；文化元素："+s:"文化元素："+s),className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded text-xs`,children:s},s))}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:k,onChange:s=>Re(s.target.value),className:`${a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-2 py-1 text-xs`,children:[e.jsx("option",{value:"电商竖版",children:"电商竖版"}),e.jsx("option",{value:"电商横版",children:"电商横版"}),e.jsx("option",{value:"小红书",children:"小红书"}),e.jsx("option",{value:"抖音封面",children:"抖音封面"}),e.jsx("option",{value:"B站封面",children:"B站封面"}),e.jsx("option",{value:"淘宝主图",children:"淘宝主图"}),e.jsx("option",{value:"LOGO",children:"LOGO"}),e.jsx("option",{value:"包装正面",children:"包装正面"})]}),e.jsxs("select",{value:H,onChange:s=>Me(s.target.value),className:`${a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-2 py-1 text-xs`,children:[e.jsx("option",{value:"1080x1920",children:"1080x1920"}),e.jsx("option",{value:"1920x1080",children:"1920x1080"}),e.jsx("option",{value:"1080x1350",children:"1080x1350"}),e.jsx("option",{value:"1920x1080-b",children:"1920x1080-横幅"}),e.jsx("option",{value:"800x800",children:"800x800"}),e.jsx("option",{value:"1024x1024",children:"1024x1024"}),e.jsx("option",{value:"1200x1800-300DPI",children:"1200x1800-300DPI"})]}),e.jsxs("label",{className:"text-xs flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:Q,onChange:s=>De(s.target.checked)})," 法律免责声明"]}),e.jsxs("label",{className:"text-xs flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:W,onChange:s=>Ge(s.target.checked)})," 禁止医疗功效"]}),e.jsxs("label",{className:"text-xs flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:J,onChange:s=>Be(s.target.checked)})," 禁止IP侵权"]}),e.jsxs("label",{className:"text-xs flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:X,onChange:s=>Fe(s.target.checked)})," 禁止不当国旗国徽使用"]})]}),e.jsx("input",{value:D,onChange:s=>fe(s.target.value),placeholder:"可选：禁止出现的元素/词汇，如涉黄暴、宗教极端、误用文化符号等",className:`${a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-3 py-2 text-xs w-full`}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:a?"text-gray-300":"text-gray-600",children:"品牌："}),e.jsx("span",{className:`${a?"text-gray-100":"text-gray-800"}`,children:d}),e.jsx("button",{onClick:()=>V([...B,{role:"user",content:`品牌：${d}；语气：${b[d].voice}`}]),className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded`,children:"应用品牌语气"}),e.jsx("button",{onClick:()=>{ue(b[d].samplePrompts||[])},className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded`,children:"载入品牌提示词"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(b[d].styleTags||[]).map(s=>e.jsx("button",{onClick:()=>z(t=>t?t+"；风格："+s:"风格："+s),className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded text-xs`,children:s},s))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(b[d].paletteTags||[]).map(s=>e.jsx("button",{onClick:()=>z(t=>t?t+"；配色："+s:"配色："+s),className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded text-xs`,children:s},s))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(b[d].cultureTags||[]).map(s=>e.jsx("button",{onClick:()=>z(t=>t?t+"；文化元素："+s:"文化元素："+s),className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded text-xs`,children:s},s))}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:a?"text-gray-300":"text-gray-600",children:"安全区："}),e.jsx("span",{className:`${a?"text-gray-100":"text-gray-800"}`,children:b[d].platformSafeZones[k]||"无特殊说明"}),e.jsx("button",{onClick:()=>fe((b[d].forbiddenPoints||[]).join("、")),className:`${a?"bg-gray-800 text-white":"bg-gray-200 text-gray-800"} px-2 py-1 rounded`,children:"载入禁用点"})]})]}),e.jsx("div",{className:"max-h-48 overflow-auto space-y-2",children:B.filter(s=>s.role!=="system").map((s,t)=>e.jsxs("div",{className:`text-sm ${s.role==="assistant"?a?"text-gray-200":"text-gray-700":"text-red-600"}`,children:[e.jsx("span",{className:"font-medium mr-2",children:s.role==="assistant"?"AI":"你"}),s.content]},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:re,onChange:s=>z(s.target.value),placeholder:"回答AI提出的问题，或主动补充需求",className:`${a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-3 py-2 text-sm flex-1`}),e.jsx("button",{onClick:async()=>{if(re.trim())try{he(!0);const s=[...B,{role:"user",content:re.trim()}];V(s);const t=await K({provider:l==="kling"?"zhipu":l,model:r.trim()||(l==="doubao"?"doubao-1.5-pro-32k-250115":l==="kimi"?"moonshot-v1-32k":l==="jimeng"?"jimeng-pro-4.0":l==="zhipu"?"glm-4-flash":l==="gemini"?"gemini-1.5-pro":"deepseek-chat"),messages:s});V([...s,{role:"assistant",content:t}]),z("")}catch{m.error("调用大模型失败，请配置密钥")}finally{he(!1)}},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg text-sm",disabled:ge,children:ge?"发送中...":"发送"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{const s=await K({provider:l==="kling"?"zhipu":l,model:r.trim()||(l==="doubao"?"doubao-1.5-pro-32k-250115":l==="kimi"?"moonshot-v1-32k":l==="jimeng"?"jimeng-pro-4.0":l==="zhipu"?"glm-4-flash":l==="gemini"?"gemini-1.5-pro":"deepseek-chat"),messages:[{role:"system",content:`请严格遵循：平台=${k}，尺寸=${H}；${Q?"需附合规意识":""}${W?"；不得医疗/功效性暗示":""}${J?"；不得未经授权的IP/商标元素":""}${X?"；不得不当使用国旗国徽等":""}${D?"；禁止元素："+D:""}${d?"；品牌禁用："+(b[d].forbiddenPoints||[]).join("、"):""}${d&&b[d].platformSafeZones[k]?"；平台安全区："+b[d].platformSafeZones[k]:""}`},{role:"system",content:"你是提示词整合器，将对话内容浓缩为一段中文提示词，包含主题、风格、构图、文化元素、色彩、尺寸/比例、输出格式等要点，语言简洁可直接用于生成。"},...B.filter(t=>t.role!=="system")]});j(s||g),m.success("已根据问答生成提示词")}catch{m.error("调用大模型失败，请配置密钥")}},className:`${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200"} px-3 py-2 rounded-lg text-sm`,children:"汇总成提示词"}),e.jsx("button",{onClick:async()=>{try{be(!0);const s=await K({provider:l==="kling"?"zhipu":l,model:r.trim()||(l==="doubao"?"doubao-1.5-pro-32k-250115":l==="kimi"?"moonshot-v1-32k":l==="jimeng"?"jimeng-pro-4.0":l==="zhipu"?"glm-4-flash":l==="gemini"?"gemini-1.5-pro":"deepseek-chat"),messages:[{role:"system",content:`请严格遵循：平台=${k}，尺寸=${H}；${Q?"需附合规意识":""}${W?"；不得医疗/功效性暗示":""}${J?"；不得未经授权的IP/商标元素":""}${X?"；不得不当使用国旗国徽等":""}${D?"；禁止元素："+D:""}${d?"；品牌禁用："+(b[d].forbiddenPoints||[]).join("、"):""}${d&&b[d].platformSafeZones[k]?"；平台安全区："+b[d].platformSafeZones[k]:""}`},{role:"system",content:"根据用户对话与需求，生成6条风格各异、可直接用于图像生成的中文提示词，使用短句分行列出，不要编号。每条尽量覆盖主题、风格、文化元素、色彩与比例。"},...B.filter(v=>v.role!=="system")]}),t=String(s||"").split(/\n|；|;|\r/).map(v=>v.trim()).filter(Boolean).slice(0,6);ue(t)}catch{m.error("调用大模型失败，请配置密钥")}finally{be(!1)}},className:`${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200"} px-3 py-2 rounded-lg text-sm`,children:Le?"多样化生成中...":"生成多样化提示词"}),e.jsx("button",{onClick:()=>V([{role:"system",content:B[0].content}]),className:`${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200"} px-3 py-2 rounded-lg text-sm`,children:"重置问答"})]}),pe.length>0&&e.jsx("div",{className:"space-y-2",children:pe.map((s,t)=>e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} border ${a?"border-gray-600":"border-gray-200"} rounded-lg p-2 flex justify-between items-center text-sm`,children:[e.jsx("span",{className:`${a?"text-gray-200":"text-gray-700"} truncate mr-2`,children:s}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>j(s),className:"px-2 py-1 rounded bg-red-600 text-white text-xs",children:"使用"})})]},t))})]})]})})]})]})})]}):e.jsxs("div",{className:`min-h-screen flex flex-col ${a?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:[e.jsx("header",{className:`sticky top-0 z-50 ${a?"bg-gray-800":"bg-white"} border-b ${a?"border-gray-700":"border-gray-200"} px-4 py-3`,children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:"AI"}),e.jsx("span",{className:"text-xl font-bold",children:"共创"}),typeof process<"u"&&cs&&!1]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>je(!0),className:`px-4 py-2 rounded-full transition-colors ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:"协作"}),e.jsx("button",{onClick:()=>ve(!0),className:`px-4 py-2 rounded-full transition-colors ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:"AI点评"}),e.jsx("button",{onClick:$e,className:`px-4 py-2 rounded-full transition-colors ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:"保存草稿"}),e.jsx("button",{onClick:ke,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-full transition-colors",disabled:N<3,children:"发布作品"})]})]})}),e.jsxs("main",{className:"flex-1 container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("a",{href:"/dashboard",className:"hover:text-red-600 transition-colors",children:"首页"}),e.jsx("i",{className:"fas fa-chevron-right text-xs mx-2 opacity-50"}),e.jsx("a",{href:"#",className:"hover:text-red-600 transition-colors",children:"创作中心"}),e.jsx("i",{className:"fas fa-chevron-right text-xs mx-2 opacity-50"}),e.jsx("span",{className:"opacity-70",children:"AI创作"})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex justify-between items-center",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mb-2 transition-all ${s<N?"bg-green-500 text-white":s===N?"bg-red-600 text-white scale-110 shadow-md":a?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-500"}`,children:s<N?e.jsx("i",{className:"fas fa-check"}):s}),e.jsxs("span",{className:`text-xs ${s===N?"font-medium":a?"text-gray-400":"text-gray-500"}`,children:[s===1&&"输入提示词",s===2&&"选择方案",s===3&&"编辑优化"]})]},s))}),e.jsxs("div",{className:"relative h-1 mt-2",children:[e.jsx("div",{className:`absolute inset-0 rounded-full ${a?"bg-gray-700":"bg-gray-200"}`}),e.jsx("div",{className:"absolute left-0 top-0 h-full rounded-full bg-red-600 transition-all",style:{width:`${(N-1)/2*100}%`}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl p-6 shadow-md`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"创作工具"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{id:"sketch",name:"一键设计",icon:"magic"},{id:"pattern",name:"纹样嵌入",icon:"th"},{id:"filter",name:"AI滤镜",icon:"filter"},{id:"trace",name:"文化溯源",icon:"book-open"}].map(s=>e.jsxs(w.button,{onClick:()=>F(s.id),className:`p-3 rounded-xl flex flex-col items-center transition-all ${q===s.id?"bg-red-50 text-red-600 border-red-200 border":a?"bg-gray-700 hover:bg-gray-600 border border-gray-600":"bg-gray-50 hover:bg-gray-100 border border-gray-200"}`,whileHover:{scale:1.03},whileTap:{scale:.97},children:[e.jsx("i",{className:`fas fa-${s.icon} text-xl mb-2`}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]},s.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"创作提示"}),e.jsx("textarea",{value:g,onChange:s=>j(s.target.value),placeholder:"描述您想要创作的内容，例如：具有中国传统元素的现代包装设计...",className:`w-full p-3 rounded-xl h-32 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors ${a?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 border":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 border"}`}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-70",children:"模型提供方"}),e.jsxs("select",{value:l,onChange:s=>Z(s.target.value),className:`${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-3 py-2 text-sm`,children:[e.jsx("option",{value:"deepseek",children:"DeepSeek"}),e.jsx("option",{value:"kimi",children:"Kimi"}),e.jsx("option",{value:"jimeng",children:"即梦"}),e.jsx("option",{value:"kling",children:"可灵"}),e.jsx("option",{value:"zhipu",children:"智谱"}),e.jsx("option",{value:"gemini",children:"Gemini"})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{value:r,onChange:s=>_(s.target.value),placeholder:l==="doubao"?"输入豆包接入点ID或bot/UUID":l==="kimi"?"输入Kimi模型名":l==="jimeng"?"输入即梦模型名":l==="kling"?"输入可灵模型名":l==="zhipu"?"输入智谱模型名":"输入模型名",className:`${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-3 py-2 text-sm w-full`})}),l==="jimeng"&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex gap-3 mb-2",children:[e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:M==="txt2img",onChange:()=>se("txt2img")})," 文生图"]}),e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:M==="compose",onChange:()=>se("compose")})," 多图融合"]})]}),M==="compose"&&e.jsxs(e.Fragment,{children:[e.jsx("textarea",{value:R,onChange:s=>G(s.target.value),placeholder:"粘贴参考图片URL，换行或逗号分隔；URL后可用@权重，如 https://xxx.jpg@0.8",className:`${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-3 py-2 text-sm w-full h-20`}),e.jsx("textarea",{value:ae,onChange:s=>xe(s.target.value),placeholder:"负面提示（可选），用于排除不希望出现的元素",className:`${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"} border rounded-lg px-3 py-2 text-sm w-full h-16 mt-2`}),e.jsx("p",{className:"text-xs mt-1 ${isDark ? 'text-gray-400' : 'text-gray-600'}",children:"选择“多图融合”时将结合参考图与负面提示生成方案"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:we,disabled:I||N>1,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center",children:I?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"AI创作中..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-magic mr-2"}),"生成设计"]})}),e.jsx("button",{onClick:He,disabled:c,className:`${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center`,children:c?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"提示词优化中..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-wand-magic-sparkles mr-2"}),"提示词优化"]})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"历史记录"}),e.jsx("button",{onClick:()=>{const s=JSON.parse(localStorage.getItem("drafts")||"[]");if(s.length>0){const t=s[0];j(t.prompt),Z(t.provider),_(t.customModel),G(t.refImagesInput||""),xe(t.negativePromptInput||""),se(t.imageMode||"txt2img"),A(t.selectedResult||null),Y(t.currentStep||1),m.success("已恢复最新草稿")}else m.info("暂无保存的草稿")},className:"text-sm text-red-600 hover:text-red-700 transition-colors",children:"恢复草稿"})]}),e.jsxs("div",{className:`p-4 rounded-xl text-center ${a?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:"text-2xl mb-2",children:e.jsx("i",{className:"far fa-clock"})}),e.jsx("p",{className:"text-sm opacity-70",children:N===1?"暂无创作历史":"当前正在创作中"}),e.jsxs("div",{className:"mt-2 text-xs opacity-50",children:["自动保存: ",localStorage.getItem("create_draft_prompt")?"已启用":"未启用"]})]})]})]}),e.jsxs("div",{className:`lg:col-span-2 ${a?"bg-gray-800":"bg-white"} rounded-2xl p-6 shadow-md`,children:[U&&e.jsx(w.div,{className:`mb-6 p-4 rounded-xl border ${a?"bg-gray-700 border-gray-600":"bg-yellow-50 border-yellow-200"}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("i",{className:"fas fa-info"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"文化元素：云纹"}),e.jsx("p",{className:"text-sm opacity-80",children:"云纹是中国传统装饰纹样中常见的一种，象征着吉祥如意、高升和祥瑞。 在传统建筑、服饰和工艺品中广泛应用，代表着中国传统文化的精髓。"})]})]}),e.jsx("button",{onClick:de,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"fas fa-times"})})]})}),N===1&&e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"text-center py-12",children:[e.jsx("div",{className:"mb-6 text-6xl text-red-600",children:e.jsx("i",{className:"fas fa-magic"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"开始您的AI创作之旅"}),e.jsx("p",{className:"opacity-80 max-w-lg mx-auto mb-8",children:"在左侧输入创作提示，AI将根据您的描述生成独特的设计作品。 您可以添加传统元素、指定风格，让AI为您带来无限创意。"}),e.jsx("img",{src:"https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_16_9&prompt=AI%20design%20workflow%20illustration%2C%20creative%20process%20concept&sign=9bd352839edca3384d1a85b069ffb466",alt:"AI创作流程",className:"rounded-xl mx-auto max-w-full h-auto"})]}),N===2&&e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h2",{className:"text-xl font-bold mb-6",children:"选择您喜欢的设计方案"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:T.map(s=>e.jsxs(w.div,{className:`rounded-xl overflow-hidden border-2 transition-all cursor-pointer ${$===s.id?"border-red-500 shadow-lg":a?"border-gray-700":"border-gray-200"}`,whileHover:{y:-5},onClick:()=>Qe(s.id),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.thumbnail,alt:`AI生成方案 ${s.id}`,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"absolute top-3 right-3 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:["匹配度 ",s.score,"%"]}),$===s.id&&e.jsxs("div",{className:"absolute bottom-3 left-3 bg-red-600 text-white text-xs px-2 py-1 rounded-full flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),"已选择"]})]}),e.jsx("div",{className:`p-4 ${a?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"font-medium",children:["AI生成方案 ",s.id]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),de()},className:"text-sm text-red-600 hover:underline",children:"查看文化元素"})]})})]},s.id))}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsx("button",{onClick:Ce,className:`px-5 py-2.5 rounded-full transition-colors ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:"返回"}),e.jsx("button",{onClick:we,disabled:I,className:"px-5 py-2.5 rounded-full bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:I?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"重新生成"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"}),"重新生成"]})})]})]}),N===3&&e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h2",{className:"text-xl font-bold mb-6",children:"编辑您的设计作品"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:`aspect-w-4 aspect-h-3 rounded-xl overflow-hidden ${a?"bg-gray-700":"bg-gray-100"} flex items-center justify-center`,children:$&&e.jsx("img",{src:(Se=T.find(s=>s.id===$))==null?void 0:Se.thumbnail,alt:"选中的设计方案",className:"max-w-full max-h-full object-contain"})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-3",children:"调整工具"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{name:"调整大小",icon:"arrows-alt",action:()=>m.info("调整大小功能开发中...")},{name:"滤镜效果",icon:"image",action:()=>m.info("滤镜效果功能开发中...")},{name:"色彩调整",icon:"palette",action:()=>m.info("色彩调整功能开发中...")},{name:"添加文字",icon:"font",action:()=>m.info("添加文字功能开发中...")},{name:"图层管理",icon:"layers",action:()=>m.info("图层管理功能开发中...")},{name:"撤销/重做",icon:"undo",action:()=>m.info("撤销/重做功能开发中...")}].map((s,t)=>e.jsxs("button",{onClick:s.action,className:`p-2 rounded-lg flex flex-col items-center ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors hover:scale-105 transform`,children:[e.jsx("i",{className:`fas fa-${s.icon} mb-1`}),e.jsx("span",{className:"text-xs",children:s.name})]},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-3",children:"传统纹样素材"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3",children:os.map(s=>e.jsxs(w.div,{className:`rounded-lg overflow-hidden border ${a?"border-gray-700":"border-gray-200"} cursor-pointer`,whileHover:{scale:1.05},onClick:de,children:[e.jsx("img",{src:s.thumbnail,alt:s.name,className:"w-full h-16 object-cover"}),e.jsx("div",{className:`p-2 text-xs text-center ${a?"bg-gray-700":"bg-gray-50"}`,children:s.name})]},s.id))})]}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsx("button",{onClick:Ce,className:`px-5 py-2.5 rounded-full transition-colors ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:"返回"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:$e,className:`px-5 py-2.5 rounded-full transition-colors ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:"保存草稿"}),e.jsx("button",{onClick:ke,className:"px-5 py-2.5 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",children:"发布作品"})]})]}),e.jsxs("div",{className:"mt-6 p-4 rounded-xl border border-dashed border-gray-300 dark:border-gray-600",children:[e.jsx("h4",{className:"font-medium mb-3",children:"分享预览"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:(_e=T.find(s=>s.id===$))==null?void 0:_e.thumbnail,alt:"分享预览",className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium",children:g||"我的AI创作作品"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"基于传统纹样创作的现代设计作品"})]}),e.jsx("button",{onClick:()=>{navigator.share?navigator.share({title:g||"我的AI创作作品",text:g,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),m.success("链接已复制到剪贴板"))},className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm transition-colors",children:"分享"})]})]})]})]})]})]}),ye&&e.jsx(ls,{isOpen:ye,onClose:()=>je(!1)}),Ue&&e.jsx(ns,{workId:"123",onClose:()=>ve(!1)}),f&&f.status!=="pending"&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center ${a?"bg-gray-900 bg-opacity-80":"bg-gray-50 bg-opacity-80"} backdrop-blur-sm`,children:e.jsxs(w.div,{className:`rounded-2xl ${a?"bg-gray-800":"bg-white"} shadow-xl max-w-2xl w-full mx-4`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:`p-6 border-b ${a?"border-gray-700":"border-gray-200"} flex justify-between items-center`,children:[e.jsx("h3",{className:"text-xl font-bold",children:"AI内容预审"}),e.jsx("button",{onClick:()=>E(null),className:`p-2 rounded-full ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors`,"aria-label":"关闭",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${f.status==="passed"?"bg-green-100 text-green-600":f.status==="warning"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:f.status==="passed"?e.jsx("i",{className:"fas fa-check"}):f.status==="warning"?e.jsx("i",{className:"fas fa-exclamation-triangle"}):e.jsx("i",{className:"fas fa-times"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:f.status==="passed"?"预审通过":f.status==="warning"?"预审有警告":"预审未通过"}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:f.status==="passed"?"您的作品符合平台规范，可以发布。":f.status==="warning"?"您的作品存在一些潜在问题，建议进行调整。":"您的作品存在不符合平台规范的内容，请修改后重新提交。"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"font-medium mb-3",children:"预审详情"}),e.jsx("div",{className:"space-y-3",children:f.issues.map((s,t)=>e.jsx("div",{className:`p-3 rounded-lg ${s.severity==="error"?a?"bg-red-900 bg-opacity-30":"bg-red-50":a?"bg-yellow-900 bg-opacity-30":"bg-yellow-50"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:`fas ${s.severity==="error"?"fa-times-circle":"fa-exclamation-circle"} mr-2 mt-0.5 text-${s.severity==="error"?"red-500":"yellow-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.type==="content"?"内容合规性":"版权问题"}),e.jsx("p",{className:"text-sm mt-1",children:s.message})]})]})},t))})]}),e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("input",{type:"checkbox",id:"enable-precheck",checked:Ne,onChange:s=>Ve(s.target.checked),className:"mr-2 rounded text-red-600 focus:ring-red-500"}),e.jsx("label",{htmlFor:"enable-precheck",className:"text-sm",children:"启用AI内容预审（建议开启，帮助确保作品合规）"})]})]}),e.jsxs("div",{className:`p-6 border-t ${a?"border-gray-700":"border-gray-200"} flex justify-end space-x-3`,children:[f.status==="warning"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(null),className:`px-4 py-2 rounded-lg ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors`,children:"返回修改"}),e.jsx("button",{onClick:Je,className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors",children:"确认发布"})]}),f.status==="passed"&&e.jsx("button",{onClick:oe,className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors",children:"继续发布"}),f.status==="failed"&&e.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors",children:"返回修改"})]})]})}),e.jsx("footer",{className:`border-t ${a?"border-gray-800 bg-gray-900":"border-gray-200 bg-white"} py-6 px-4`,children:e.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:"© 2025 AI共创平台. 保留所有权利"}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx("a",{href:"#",className:`text-sm ${a?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"隐私政策"}),e.jsx("a",{href:"#",className:`text-sm ${a?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"服务条款"}),e.jsx("a",{href:"#",className:`text-sm ${a?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"帮助中心"})]})]})})]})}export{us as default};
