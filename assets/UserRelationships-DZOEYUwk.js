import{j as e,m as N}from"./ui-vendor-MzHb7wIE.js";import{r as c,u as $,c as k}from"./router-vendor-BxM3E2Au.js";import{u as S,A as C,t as m}from"./index-BK8JEn3N.js";import{b as x}from"./api-BRiijvek.js";import{t as i,b as F}from"./analytics-BCQ-9z26.js";import"./react-vendor-CWc6w16D.js";var U={};function T(){const{isDark:r}=S(),{isAuthenticated:h}=c.useContext(C),l=$(),{type:w}=k(),[o,g]=c.useState([]),[y,p]=c.useState(!0),[t,v]=c.useState(w||"following");c.useEffect(()=>{if(!h){m.info("ËØ∑ÂÖàÁôªÂΩïÊü•ÁúãÁî®Êà∑ÂÖ≥Á≥ª"),l("/login");return}i("user_relationships_page_view",{tab:t,timestamp:new Date().toISOString()}),j()},[h,t]);const j=async()=>{var s,d;try{p(!0);let a;t==="following"?(a=await x.getFollowing(),g(a.following)):(a=await x.getFollowers(),g(a.followers)),i("user_relationships_loaded",{tab:t,user_count:a.total||((s=a.following)==null?void 0:s.length)||((d=a.followers)==null?void 0:d.length)||0,timestamp:new Date().toISOString()})}catch(a){console.error(`Âä†ËΩΩ${t}ÂàóË°®Â§±Ë¥•:`,a),m.error(`Âä†ËΩΩ${t}ÂàóË°®Â§±Ë¥•`),i("user_relationships_load_error",{tab:t,error:a instanceof Error?a.message:"Unknown error",timestamp:new Date().toISOString()}),g([{id:"user1",username:"ËÆæËÆ°Â∏àÂ∞èÊòé",avatar:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=User%20avatar%20xiaoming&sign=cc76aace202a78fcb07391c53cf45642",bio:"AIÂàõ‰ΩúÁà±Â•ΩËÄÖÔºå‰∏ìÊ≥®‰º†ÁªüÊñáÂåñ‰∏éÁé∞‰ª£ËÆæËÆ°ËûçÂêà",isFollowing:!0},{id:"user2",username:"ÊñáÂåñÊé¢Á¥¢ËÄÖ",avatar:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=User%20avatar%20culture%20explorer&sign=abc123",bio:"Ëá¥Âäõ‰∫é‰º†ÊâøÂíåÂèëÊâ¨‰∏≠Âçé‰º†ÁªüÊñáÂåñ",isFollowing:!1},{id:"user3",username:"AIËâ∫ÊúØÂÆ∂",avatar:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=User%20avatar%20AI%20artist&sign=def456",bio:"Áî®AIÊäÄÊúØÂàõÈÄ†Áã¨ÁâπÁöÑËâ∫ÊúØ‰ΩúÂìÅ",isFollowing:!0}])}finally{p(!1)}},_=async(s,d)=>{try{const a=await x.followUser(s);g(o.map(n=>n.id===s?{...n,isFollowing:a.following}:n));const b=o.find(n=>n.id===s);b&&F(s,b.username,a.following),i(a.following?"user_follow_action":"user_unfollow_action",{target_user_id:s,source:"user_relationships_page",timestamp:new Date().toISOString()}),m.success(a.following?"ÂÖ≥Ê≥®ÊàêÂäü":"Â∑≤ÂèñÊ∂àÂÖ≥Ê≥®")}catch(a){console.error("ÂÖ≥Ê≥®Êìç‰ΩúÂ§±Ë¥•:",a),m.error("Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï"),i("user_follow_error",{target_user_id:s,action:d?"unfollow":"follow",error:a instanceof Error?a.message:"Unknown error",timestamp:new Date().toISOString()})}},f=s=>{l(`/profile/${s}`),i("user_relationships_profile_click",{target_user_id:s,source:"user_relationships_page",timestamp:new Date().toISOString()})},u=s=>{i("user_relationships_tab_switch",{from_tab:t,to_tab:s,timestamp:new Date().toISOString()}),v(s),l(`/user-relationships/${s}`)};return y?e.jsx("div",{className:`min-h-screen ${r?"bg-gray-900":"bg-gray-50"} pt-20`,children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("div",{className:`h-10 w-24 rounded-lg ${r?"bg-gray-800":"bg-white"} animate-pulse`}),e.jsx("div",{className:`h-10 w-24 rounded-lg ${r?"bg-gray-800":"bg-white"} animate-pulse`})]}),[1,2,3,4].map(s=>e.jsx("div",{className:`rounded-2xl p-6 ${r?"bg-gray-800":"bg-white"} animate-pulse`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 w-32 bg-gray-400 rounded mb-2"}),e.jsx("div",{className:"h-3 w-48 bg-gray-400 rounded"})]})]}),e.jsx("div",{className:"h-10 w-24 bg-gray-400 rounded-lg"})]})},s))]})})}):e.jsx("div",{className:`min-h-screen ${r?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} pt-20`,children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:"text-xl font-bold text-red-600 mr-2",children:"AI"}),e.jsx("span",{className:"text-xl font-bold",children:"ÂÖ±Âàõ"}),typeof process<"u"&&U&&!1]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:t==="following"?"ÊàëÁöÑÂÖ≥Ê≥®":"ÊàëÁöÑÁ≤â‰∏ù"}),e.jsx("p",{className:`${r?"text-gray-400":"text-gray-600"}`,children:t==="following"?"ÁÆ°ÁêÜÊÇ®ÂÖ≥Ê≥®ÁöÑÁî®Êà∑ÔºåÊü•Áúã‰ªñ‰ª¨ÁöÑÊúÄÊñ∞Âä®ÊÄÅ":"Êü•ÁúãÂÖ≥Ê≥®ÊÇ®ÁöÑÁî®Êà∑ÔºåÂèëÁé∞Êõ¥Â§öÊúâË∂£ÁöÑ‰∫∫"})]}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsxs("button",{onClick:()=>u("following"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${t==="following"?"bg-red-600 text-white":r?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-100"}`,children:["ÂÖ≥Ê≥® (",o.filter(s=>s.isFollowing).length,")"]}),e.jsxs("button",{onClick:()=>u("followers"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${t==="followers"?"bg-red-600 text-white":r?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-100"}`,children:["Á≤â‰∏ù (",o.length,")"]})]}),o.length===0?e.jsxs("div",{className:`text-center py-12 ${r?"bg-gray-800":"bg-white"} rounded-2xl`,children:[e.jsx("div",{className:"text-6xl mb-4",children:"üë•"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t==="following"?"ÊöÇÊó†ÂÖ≥Ê≥®":"ÊöÇÊó†Á≤â‰∏ù"}),e.jsx("p",{className:`${r?"text-gray-400":"text-gray-600"}`,children:t==="following"?"Âø´ÂéªÂèëÁé∞ÊÑüÂÖ¥Ë∂£ÁöÑÁî®Êà∑Âπ∂ÂÖ≥Ê≥®‰ªñ‰ª¨ÂêßÔºÅ":"Â§öÂèëÂ∏É‰ºòË¥®ÂÜÖÂÆπÔºåÂê∏ÂºïÊõ¥Â§öÁî®Êà∑ÂÖ≥Ê≥®ÊÇ®ÔºÅ"}),e.jsx("button",{onClick:()=>l("/explore"),className:"mt-4 bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition-colors",children:t==="following"?"ÂèëÁé∞Áî®Êà∑":"ÂèëÂ∏É‰ΩúÂìÅ"})]}):e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsx(N.div,{className:`rounded-2xl p-6 ${r?"bg-gray-800":"bg-white"} shadow-lg`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.avatar,alt:s.username,className:"w-16 h-16 rounded-full cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>f(s.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg cursor-pointer hover:text-red-600 transition-colors",onClick:()=>f(s.id),children:s.username}),e.jsx("p",{className:`${r?"text-gray-400":"text-gray-600"} text-sm`,children:s.bio})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>_(s.id,s.isFollowing||!1),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s.isFollowing?"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600":"bg-red-600 text-white hover:bg-red-700"}`,children:s.isFollowing?"Â∑≤ÂÖ≥Ê≥®":"ÂÖ≥Ê≥®"}),e.jsx("button",{onClick:()=>l(`/chat/${s.id}`),className:`px-4 py-2 rounded-lg border transition-colors ${r?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"ÁßÅ‰ø°"})]})]})},s.id))})]})})}export{T as default};
