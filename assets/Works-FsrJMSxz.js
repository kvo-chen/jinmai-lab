import{j as e,m as g}from"./ui-vendor-MzHb7wIE.js";import{r as i,u as h}from"./router-vendor-BxM3E2Au.js";import{u as b,A as y}from"./index-BK8JEn3N.js";import{b as p}from"./api-BRiijvek.js";import"./react-vendor-CWc6w16D.js";var u={};function $(){const{isDark:t}=b(),{isAuthenticated:n}=i.useContext(y),r=h(),[o,d]=i.useState(!0),[l,x]=i.useState([]);i.useEffect(()=>{if(!n){r("/login");return}(async()=>{try{const a=await p.get("/works");x(Array.isArray(a==null?void 0:a.works)?a.works:[])}catch{}d(!1)})()},[n,r]);const m=s=>{r(`/works/${s}`)},c=()=>{r("/create")};return o?e.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600 mb-4"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"加载中..."})]})}):e.jsxs("div",{className:`min-h-screen ${t?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:[e.jsx("header",{className:`sticky top-0 z-50 ${t?"bg-gray-800":"bg-white"} border-b ${t?"border-gray-700":"border-gray-200"} px-4 py-3`,children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:"AI"}),e.jsx("span",{className:"text-xl font-bold",children:"共创"}),typeof process<"u"&&u&&!1]}),e.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-full transition-colors",onClick:c,children:"新建作品"})]})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"作品管理"}),l.length===0?e.jsx("div",{className:`p-8 rounded-2xl text-center ${t?"bg-gray-800":"bg-white"} shadow-md`,children:e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"暂无作品，点击右上角创建一个吧"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map((s,a)=>e.jsxs(g.div,{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl overflow-hidden shadow-md`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.03},children:[e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold truncate",children:s.title}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${s.status==="completed"?"bg-green-100 text-green-600":s.status==="draft"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:s.status})]}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"} text-sm line-clamp-2 mb-3`,children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-eye mr-1"}),s.views]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-thumbs-up mr-1"}),s.likes]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-comment mr-1"}),s.comments]})]}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:`${t?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} px-3 py-2 rounded-lg text-sm`,onClick:()=>m(s.id),children:"查看"}),e.jsx("button",{className:`${t?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} px-3 py-2 rounded-lg text-sm`,onClick:c,children:"编辑"})]})]})]},s.id))})]})]})}export{$ as default};
