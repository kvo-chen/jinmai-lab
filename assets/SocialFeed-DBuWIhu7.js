import{j as e,m as j}from"./ui-vendor-MzHb7wIE.js";import{r as o,u as v}from"./router-vendor-BxM3E2Au.js";import{u as w,A as N,t as f}from"./index-BK8JEn3N.js";import{b as _}from"./api-BRiijvek.js";import{t as i,a as k}from"./analytics-BCQ-9z26.js";import"./react-vendor-CWc6w16D.js";var S={};function U(){const{isDark:t}=w(),{isAuthenticated:l}=o.useContext(N),c=v(),[d,m]=o.useState([]),[u,x]=o.useState(!0),[a,g]=o.useState("following");o.useEffect(()=>{if(!l){f.info("è¯·å…ˆç™»å½•æŸ¥çœ‹ç¤¾äº¤åŠ¨æ€"),c("/login");return}i("social_feed_page_view",{tab:a,timestamp:new Date().toISOString()}),b()},[l,a]);const b=async()=>{try{x(!0);const s=await _.getSocialFeed();m(s.feed),i("social_feed_loaded",{tab:a,itemCount:s.feed.length,timestamp:new Date().toISOString()})}catch(s){console.error("åŠ è½½ç¤¾äº¤åŠ¨æ€å¤±è´¥:",s),f.error("åŠ è½½ç¤¾äº¤åŠ¨æ€å¤±è´¥"),i("social_feed_load_error",{tab:a,error:s instanceof Error?s.message:"Unknown error",timestamp:new Date().toISOString()}),m([{id:"1",type:"new_work",user:{id:"user1",username:"è®¾è®¡å¸ˆå°æ˜Ž",avatar:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=User%20avatar%20xiaoming&sign=cc76aace202a78fcb07391c53cf45642"},work:{id:"work1",title:"å›½æ½®æ–°é£Žå°š",imageUrl:"https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_16_9&prompt=Modern%20Chinese%20style%20fashion%20design&sign=b4fd3173ff1e94fc0f44e555fac99ac0",description:"èžåˆä¼ ç»Ÿä¸­å›½å…ƒç´ ä¸ŽçŽ°ä»£æ—¶å°šè®¾è®¡"},createdAt:new Date(Date.now()-36e5).toISOString()},{id:"2",type:"recommendation",title:"å‘çŽ°æ–°ä½œå“",description:"åŸºäºŽæ‚¨çš„å…´è¶£æŽ¨è",works:[{id:"rec1",title:"æŽ¨èä½œå“1",imageUrl:"https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_16_9&prompt=Recommended%20artwork&sign=abc123",author:{id:"artist1",username:"æŽ¨èè‰ºæœ¯å®¶",avatar:"https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=Artist%20avatar&sign=def456"}}],createdAt:new Date(Date.now()-72e5).toISOString()}])}finally{x(!1)}},h=s=>{c(`/works/${s}`),k(s,"Social Feed Work"),i("social_feed_work_click",{work_id:s,source:"social_feed",timestamp:new Date().toISOString()})},p=s=>{c(`/profile/${s}`),i("social_feed_user_click",{user_id:s,source:"social_feed",timestamp:new Date().toISOString()})},y=s=>{const r=new Date(s),n=Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60));return n<1?"åˆšåˆš":n<24?`${n}å°æ—¶å‰`:`${Math.floor(n/24)}å¤©å‰`};return u?e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"} pt-20`,children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("div",{className:`h-10 w-24 rounded-lg ${t?"bg-gray-800":"bg-white"} animate-pulse`}),e.jsx("div",{className:`h-10 w-24 rounded-lg ${t?"bg-gray-800":"bg-white"} animate-pulse`})]}),[1,2,3].map(s=>e.jsxs("div",{className:`rounded-2xl p-6 ${t?"bg-gray-800":"bg-white"} animate-pulse`,children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-400 rounded mb-2"}),e.jsx("div",{className:"h-3 w-24 bg-gray-400 rounded"})]})]}),e.jsx("div",{className:"h-32 bg-gray-400 rounded-xl"})]},s))]})})}):e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} pt-20`,children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:"text-xl font-bold text-red-600 mr-2",children:"AI"}),e.jsx("span",{className:"text-xl font-bold",children:"å…±åˆ›"}),typeof process<"u"&&S&&!1]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"ç¤¾äº¤åŠ¨æ€"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"å‘çŽ°å…³æ³¨ç”¨æˆ·çš„æœ€æ–°åˆ›ä½œå’ŒæŽ¨èå†…å®¹"})]}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("button",{onClick:()=>{g("following"),i("social_tab_switch",{from_tab:a,to_tab:"following",timestamp:new Date().toISOString()})},className:`px-6 py-2 rounded-lg font-medium transition-colors ${a==="following"?"bg-red-600 text-white":t?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"å…³æ³¨åŠ¨æ€"}),e.jsx("button",{onClick:()=>{g("recommended"),i("social_tab_switch",{from_tab:a,to_tab:"recommended",timestamp:new Date().toISOString()})},className:`px-6 py-2 rounded-lg font-medium transition-colors ${a==="recommended"?"bg-red-600 text-white":t?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"æŽ¨èå†…å®¹"})]}),e.jsx("div",{className:"space-y-6",children:d.length===0?e.jsxs("div",{className:`text-center py-12 ${t?"bg-gray-800":"bg-white"} rounded-2xl`,children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“±"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"æš‚æ— åŠ¨æ€"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:a==="following"?"æ‚¨è¿˜æ²¡æœ‰å…³æ³¨ä»»ä½•ç”¨æˆ·ï¼Œå¿«åŽ»å‘çŽ°æ„Ÿå…´è¶£çš„ç”¨æˆ·å§ï¼":"ç³»ç»Ÿæ­£åœ¨ä¸ºæ‚¨å‡†å¤‡ä¸ªæ€§åŒ–æŽ¨èå†…å®¹..."})]}):d.map(s=>e.jsxs(j.div,{className:`rounded-2xl p-6 shadow-lg ${t?"bg-gray-800":"bg-white"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[s.user&&e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("img",{src:s.user.avatar,alt:s.user.username,className:"w-12 h-12 rounded-full cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>p(s.user.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold cursor-pointer hover:text-red-600 transition-colors",onClick:()=>p(s.user.id),children:s.user.username}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:y(s.createdAt)})]})]}),s.type==="new_work"&&s.work&&e.jsx("div",{className:"cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>h(s.work.id),children:e.jsxs("div",{className:"relative overflow-hidden rounded-xl mb-4",children:[e.jsx("img",{src:s.work.imageUrl,alt:s.work.title,className:"w-full h-64 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent",children:e.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[e.jsx("h3",{className:"text-xl font-bold",children:s.work.title}),e.jsx("p",{className:"text-sm opacity-90",children:s.work.description})]})})]})}),s.type==="recommendation"&&s.works&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:s.title}),e.jsx("p",{className:`mb-4 ${t?"text-gray-400":"text-gray-600"}`,children:s.description}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:s.works.map(r=>e.jsxs("div",{className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>h(r.id),children:[e.jsx("img",{src:r.imageUrl,alt:r.title,className:"w-full h-32 object-cover rounded-lg mb-2"}),e.jsx("h4",{className:"font-medium text-sm",children:r.title}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:r.author.username})]},r.id))})]}),e.jsx("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:`flex items-center space-x-1 text-sm ${t?"text-gray-400 hover:text-red-400":"text-gray-500 hover:text-red-500"} transition-colors`,children:[e.jsx("i",{className:"far fa-heart"}),e.jsx("span",{children:"ç‚¹èµž"})]}),e.jsxs("button",{className:`flex items-center space-x-1 text-sm ${t?"text-gray-400 hover:text-blue-400":"text-gray-500 hover:text-blue-500"} transition-colors`,children:[e.jsx("i",{className:"far fa-comment"}),e.jsx("span",{children:"è¯„è®º"})]}),e.jsxs("button",{className:`flex items-center space-x-1 text-sm ${t?"text-gray-400 hover:text-green-400":"text-gray-500 hover:text-green-500"} transition-colors`,children:[e.jsx("i",{className:"far fa-share"}),e.jsx("span",{children:"åˆ†äº«"})]})]})})]},s.id))})]})})}export{U as default};
