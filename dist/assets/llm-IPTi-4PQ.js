async function a(e){const r=(typeof window<"u"&&window.location.hostname.includes("vercel.app"),"/api/llm"),i=e.apiKey??(typeof window<"u"&&localStorage.getItem("llm_api_key_"+(e.provider||"deepseek"))||""),o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e.provider||"deepseek",model:e.model||(e.provider==="doubao"?"doubao-1.5-pro-32k-250115":e.provider==="kimi"?"moonshot-v1-32k":e.provider==="jimeng"?"jimeng-pro-4.0":e.provider==="zhipu"?"glm-4-flash":e.provider==="gemini"?"gemini-1.5-pro":"deepseek-chat"),messages:e.messages,apiKey:i})}),n=await o.json();if(!o.ok)throw new Error((n==null?void 0:n.error)||"LLM request failed");return String((n==null?void 0:n.content)||"")}async function d(e){const r=(typeof window<"u"&&window.location.hostname.includes("vercel.app"),"/api/image"),i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e.provider||"jimeng",model:e.model||"jimeng-4.0",prompt:e.prompt,width:e.width??1024,height:e.height??1024,sample_strength:e.sample_strength??.5,response_format:e.response_format||"url",apiKey:e.apiKey})}),o=await i.json();if(!i.ok)throw new Error((o==null?void 0:o.error)||"Image request failed");return(Array.isArray(o==null?void 0:o.data)?o.data:[]).map(t=>(t==null?void 0:t.url)||(t==null?void 0:t.b64_json)||"").filter(t=>t)}async function s(e){const r=(typeof window<"u"&&window.location.hostname.includes("vercel.app"),"/api/image/compositions"),i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e.provider||"jimeng",model:e.model||"jimeng-4.0",prompt:e.prompt||"",images:e.images||[],negative_prompt:e.negative_prompt||"",width:e.width??1024,height:e.height??1024,sample_strength:e.sample_strength??.5,response_format:e.response_format||"url",apiKey:e.apiKey})}),o=await i.json();if(!i.ok)throw new Error((o==null?void 0:o.error)||"Image composition failed");return(Array.isArray(o==null?void 0:o.data)?o.data:[]).map(t=>(t==null?void 0:t.url)||(t==null?void 0:t.b64_json)||"").filter(t=>t)}async function p(e){const r=(typeof window<"u"&&window.location.hostname.includes("vercel.app"),"/api/kling/image"),i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessKey:e.accessKey,secretKey:e.secretKey,model:e.model||"kling-image-1.0",prompt:e.prompt,width:e.width??1024,height:e.height??1024,response_format:e.response_format||"url"})}),o=await i.json();if(!i.ok)throw new Error((o==null?void 0:o.error)||"Kling image request failed");return(Array.isArray(o==null?void 0:o.data)?o.data:[]).map(t=>(t==null?void 0:t.url)||(t==null?void 0:t.b64_json)||"").filter(t=>t)}export{s as a,a as c,d as g,p as k};
